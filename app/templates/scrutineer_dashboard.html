{% extends "base.html" %}
{% block title %}Scrutineer Dashboard{% endblock %}
{% block content %}

<style>
    .form-label {
        width: 150px;
        /* Adjust width as needed */
    }

    .button.active {
        background-color: #ffb700;
        /* Active button background color */
        color: azure;
    }

    .btn-group {
        margin-top: 20px;
        /* Adjust margin as needed */
    }

    iframe#content-frame {
        width: 100%;
        border: none;
        /* Remove default border */
        margin-top: 20px;
    }
</style>

<div class="container">
    <div class="card-header card-header-transparent d-flex justify-content-center">Scrutineer Dashboard</div>
    <div class="btn-group mt-3">
        <a href="{{ url_for('daily_votes_check') }}" target="content-frame"
            class="button {% if request.endpoint == 'daily_votes_check' %}active{% endif %}">Daily Votes Check</a>
        <a href="{{ url_for('ip_address_check') }}" target="content-frame"
            class="button {% if request.endpoint == 'ip_address_check' %}active{% endif %}">IP Address Check</a>
        <a href="{{ url_for('all_competitions') }}" target="content-frame"
            class="button {% if request.endpoint == 'all_competitions' %}active{% endif %}">View Competitions</a>
        <a href="{{ url_for('voters_profile') }}" target="content-frame"
            class="button {% if request.endpoint == 'voters_profile' %}active{% endif %}">View Voters Profile</a>
    </div>

    <iframe id="content-frame" name="content-frame" src="{{ url_for('daily_votes_check') }}"></iframe>

</div>
</div>

<script>
    // Function to handle the active button
    function setActiveButton() {
        const iframeSrc = document.getElementById('content-frame').src;
        const buttons = document.querySelectorAll('.btn-group .button');
        buttons.forEach(button => {
            button.classList.remove('active');
            if (button.href === iframeSrc) {
                button.classList.add('active');
            }
        });
    }

    // Event listeners for button clicks
    document.querySelectorAll('.btn-group .button').forEach(button => {
        button.addEventListener('click', function (event) {
            event.preventDefault();
            document.getElementById('content-frame').src = this.href;

            document.querySelectorAll('.btn-group .button').forEach(btn => {
                btn.classList.remove('active');
            });
            this.classList.add('active');
        });
    });

    // Set the correct button active on page load
    document.getElementById('content-frame').addEventListener('load', setActiveButton);

</script>

{% endblock %}